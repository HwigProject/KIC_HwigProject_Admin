<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<<<<<<< HEAD
<mapper namespace="com.hwig.admin.mappers.sellerMapper">

=======

<mapper namespace="com.hwig.admin.mappers.sellerMapper">

	<insert id="sellerInsert">
		insert into tbl_seller (sel_id, sel_pw, sel_cname, sel_name, sel_addr, sel_tel, sel_img)
			values (#{sel_id}, #{sel_pw}, #{sel_cname}, #{sel_name}, #{sel_addr}, #{sel_tel}, #{sel_img})
	</insert>
	
	<select id="sellerSelect" resultType="SellerVO">
		select * from tbl_seller where sel_id = #{sel_id}
		<if test="sel_pw != null and sel_pw != ''">
			and sel_pw = #{sel_pw}
		</if>
	</select>
	
	<update id="sellerUpdate">
		update tbl_seller set sel_pw = #{sel_pw}, sel_cname = #{sel_cname}, sel_name = #{sel_name}, sel_addr = #{sel_addr}, sel_tel = #{sel_tel}, sel_img = #{sel_img}
			where sel_id = #{sel_id}
	</update>
	
	<update id="sellerImgUpdate">
		update tbl_seller set sel_img = #{sel_img} where sel_id = #{sel_id}
	</update>
	
	<sql id="search">
		<if test="searchType != null">
			<if test="searchType == 'cname'.toString()">
				and sel_cname like '%' || #{keyword} || '%'
			</if>
			<if test="searchType == 'id'.toString()">
				and sel_id like '%' || #{keyword} || '%'
			</if>
		</if>
	</sql>
	
	<select id="sellerAllSelect" resultType="SellerVO">
		select * from (
			select rownum, sel_id, sel_pw, sel_cname, sel_name, sel_addr, sel_tel,
				row_number() over(order by rownum desc) as rnum from tbl_seller where 1=1
		
		<include  refid="search"></include>
		
			) mb where rnum between #{pageStart} and #{pageEnd}
	</select>
	
	<select id="sellerAllCount" resultType="int">
			select count(sel_id) from tbl_seller where 1=1
		<include refid="search"></include>
	</select>

>>>>>>> 8957a4d0694275f6aaa4769edced0e67b1fd8a58
</mapper>